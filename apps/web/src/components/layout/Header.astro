---
import { cn } from "../../lib/utils/cn";
import UserMenu from "../auth/UserMenu";
import ThemeToggle from "../ui/ThemeToggle";
import MobileNav from "./MobileNav";

const { currentPath = "" } = Astro.props;

const nav = [
  { href: "/docs", label: "文档" },
  { href: "/blog", label: "博客" },
  { href: "/plugins", label: "插件" },
  { href: "/showcase", label: "案例" },
  { href: "/downloads", label: "下载" }
];
---

<header class="border-b border-neutral-200 bg-white/80 backdrop-blur dark:border-neutral-800 dark:bg-neutral-950/80">
  <div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-3">
    <a
      href="/"
      class="flex items-center gap-2 font-semibold text-neutral-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 dark:text-neutral-100"
      aria-label="PocketBase.cn 首页"
    >
      <span class="inline-flex h-8 w-8 items-center justify-center rounded bg-brand-600 text-white" aria-hidden="true">PB</span>
      <span>PocketBase.cn</span>
    </a>

    <nav class="hidden items-center gap-4 md:flex" aria-label="主导航">
      {nav.map((item) => (
        <a
          href={item.href}
          class={cn(
            "rounded px-2 py-1 text-sm text-neutral-700 hover:text-neutral-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 dark:text-neutral-300 dark:hover:text-white",
            currentPath === item.href ? "font-semibold text-brand-700 dark:text-brand-300" : ""
          )}
          aria-current={currentPath === item.href ? "page" : undefined}
        >
          {item.label}
        </a>
      ))}
    </nav>

    <div class="flex items-center gap-2">
      <ThemeToggle client:load />
      <UserMenu client:load />
      <MobileNav currentPath={currentPath} client:load />
    </div>
  </div>
</header>
